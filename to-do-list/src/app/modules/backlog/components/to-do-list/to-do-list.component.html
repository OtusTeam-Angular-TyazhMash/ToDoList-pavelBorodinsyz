<ng-container *ngIf="isLoading === true; then loadingTemplate; else toDoListTemplate" />
<ng-template #loadingTemplate>
  <app-loading-spinner></app-loading-spinner>
</ng-template>
<ng-template #toDoListTemplate>
  <div class="container">
    <mat-card>
        <mat-card-header>
            <mat-card-title>
              <span>Лист задач</span>
              <mat-button-toggle-group [value]="null" (change)="onStatusFilterChange($event)">
                <mat-button-toggle [value]="null">Все</mat-button-toggle>
                <mat-button-toggle [value]="toDoListItemEnum.InProgress">В процессе</mat-button-toggle>
                <mat-button-toggle [value]="toDoListItemEnum.Completed">Выполнены</mat-button-toggle>
            </mat-button-toggle-group>
            </mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div *ngIf="(toDoListItems$ | async) as toDoListItems">
              <mat-selection-list [multiple]="false" hideSingleSelectionIndicator>
                <app-to-do-list-item *ngFor="let item of toDoListItems" [item]="item" [routerLink]="[item.id]"
                (emitDelete)="deleteItem($event)"
                (emitChangeText)="editToDoListItemTitleById(item.id, $event)"
                (emitChangeStatus)="editToDoListItemStatusById(item.id, $event)"></app-to-do-list-item>
              </mat-selection-list>
            </div>
          </mat-card-content>
          <mat-card-content>
            <div>
              <ng-container *ngIf="getItemIdFromRoute !== null; then descriptionTemplate; else hintTemplate" />
              <ng-template #descriptionTemplate>
                  <router-outlet></router-outlet>
              </ng-template>
              <ng-template #hintTemplate>
                  <p>Выберите задачу...</p>
              </ng-template>
            </div>
          </mat-card-content>
          <mat-card-content>
            <app-to-do-list-create (emitNewItem)="addToDoListItem($event)"></app-to-do-list-create>
          </mat-card-content>
    </mat-card>
</div>
</ng-template>
